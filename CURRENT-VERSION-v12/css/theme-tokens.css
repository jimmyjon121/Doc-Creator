:root {
  /* ========================================
     LIGHT MODE (Default)
     ======================================== */
  
  /* --- Core Brand Colors --- */
  --brand-primary: #6366F1;           /* Indigo-500 - Primary accent */
  --brand-primary-hover: #4F46E5;     /* Indigo-600 */
  --brand-primary-active: #4338CA;    /* Indigo-700 */
  --brand-primary-light: #E0E7FF;     /* Indigo-100 - Backgrounds */
  --brand-primary-subtle: #EEF2FF;    /* Indigo-50 */
  
  --brand-secondary: #8B5CF6;         /* Violet-500 */
  --brand-secondary-hover: #7C3AED;   /* Violet-600 */
  
  /* --- Background Hierarchy --- */
  --bg-base: #F8F7FC;                 /* Main app background - soft lavender white */
  --bg-surface: #FFFFFF;              /* Cards, panels, modals */
  --bg-surface-elevated: #FFFFFF;     /* Elevated surfaces (dropdowns, popovers) */
  --bg-surface-sunken: #F3F2F8;       /* Inset areas, table backgrounds */
  --bg-overlay: rgba(0, 0, 0, 0.5);   /* Modal/drawer backdrop */
  
  /* --- Sidebar & Navigation --- */
  --sidebar-bg: #1E1B4B;              /* Indigo-950 - Dark sidebar in light mode */
  --sidebar-bg-hover: #312E81;        /* Indigo-900 */
  --sidebar-text: #C7D2FE;            /* Indigo-200 */
  --sidebar-text-active: #FFFFFF;
  --sidebar-icon: #A5B4FC;            /* Indigo-300 */
  --sidebar-icon-active: #FFFFFF;
  --sidebar-divider: #3730A3;         /* Indigo-800 */
  
  /* --- Header Bar --- */
  --header-bg: #1E1B4B;               /* Matches sidebar */
  --header-text: #FFFFFF;
  --header-text-muted: #C7D2FE;
  
  /* --- Toolbar (Programs & Docs) --- */
  --toolbar-bg: linear-gradient(135deg, #4f46e5 0%, #6366f1 50%, #818cf8 100%);
  
  /* --- Text Colors --- */
  --text-primary: #1F2937;            /* Gray-800 - Main body text */
  --text-secondary: #4B5563;          /* Gray-600 - Secondary text */
  --text-tertiary: #6B7280;           /* Gray-500 - Muted text */
  --text-placeholder: #9CA3AF;        /* Gray-400 */
  --text-disabled: #D1D5DB;           /* Gray-300 */
  --text-inverse: #FFFFFF;            /* Text on dark backgrounds */
  --text-link: #6366F1;               /* Links */
  --text-link-hover: #4F46E5;
  
  /* --- Border Colors --- */
  --border-default: #E5E7EB;          /* Gray-200 */
  --border-light: #F3F4F6;            /* Gray-100 */
  --border-strong: #D1D5DB;           /* Gray-300 */
  --border-focus: #6366F1;            /* Focus rings */
  --border-focus-ring: rgba(99, 102, 241, 0.25);
  
  /* --- Card Styles --- */
  --card-bg: #FFFFFF;
  --card-border: #E5E7EB;
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  --card-shadow-hover: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
  --card-shadow-elevated: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
  
  /* --- Program Card Headers (Dark Headers on Light Cards) --- */
  --card-header-dark: #1E1B4B;        /* Navy header */
  --card-header-dark-text: #FFFFFF;
  
  /* --- Status Colors --- */
  /* Red Zone - Critical/Urgent */
  --status-red: #EF4444;              /* Red-500 */
  --status-red-bg: #FEF2F2;           /* Red-50 */
  --status-red-border: #FECACA;       /* Red-200 */
  --status-red-text: #991B1B;         /* Red-800 */
  
  /* Yellow Zone - Warning/Due Today */
  --status-yellow: #F59E0B;           /* Amber-500 */
  --status-yellow-bg: #FFFBEB;        /* Amber-50 */
  --status-yellow-border: #FDE68A;    /* Amber-200 */
  --status-yellow-text: #92400E;      /* Amber-800 */
  
  /* Green Zone - Success/Complete */
  --status-green: #10B981;            /* Emerald-500 */
  --status-green-bg: #ECFDF5;         /* Emerald-50 */
  --status-green-border: #A7F3D0;     /* Emerald-200 */
  --status-green-text: #065F46;       /* Emerald-800 */
  
  /* Purple Zone - Discharge Prep */
  --status-purple: #8B5CF6;           /* Violet-500 */
  --status-purple-bg: #F5F3FF;        /* Violet-50 */
  --status-purple-border: #DDD6FE;    /* Violet-200 */
  --status-purple-text: #5B21B6;      /* Violet-800 */
  
  /* Blue - Info/Network */
  --status-blue: #3B82F6;             /* Blue-500 */
  --status-blue-bg: #EFF6FF;          /* Blue-50 */
  --status-blue-border: #BFDBFE;      /* Blue-200 */
  --status-blue-text: #1E40AF;        /* Blue-800 */
  
  /* --- Program Type Badge Colors --- */
  --badge-rtc: #1E1B4B;               /* RTC - Navy */
  --badge-rtc-text: #FFFFFF;
  
  --badge-php: #7C3AED;               /* PHP - Violet */
  --badge-php-text: #FFFFFF;
  
  --badge-iop: #0EA5E9;               /* IOP - Sky blue */
  --badge-iop-text: #FFFFFF;
  
  --badge-virtual: #6366F1;           /* Virtual - Indigo */
  --badge-virtual-text: #FFFFFF;
  
  --badge-network: #1E1B4B;           /* Network - Navy */
  --badge-network-text: #FFFFFF;
  
  --badge-tbs: #059669;               /* TBS - Emerald */
  --badge-tbs-text: #FFFFFF;
  
  --badge-wilderness: #D97706;        /* Wilderness - Amber */
  --badge-wilderness-text: #FFFFFF;
  
  /* --- Button Colors --- */
  /* Primary Button */
  --btn-primary-bg: #6366F1;
  --btn-primary-bg-hover: #4F46E5;
  --btn-primary-bg-active: #4338CA;
  --btn-primary-text: #FFFFFF;
  
  /* Secondary Button */
  --btn-secondary-bg: #FFFFFF;
  --btn-secondary-bg-hover: #F9FAFB;
  --btn-secondary-border: #D1D5DB;
  --btn-secondary-text: #374151;
  
  /* Danger Button */
  --btn-danger-bg: #EF4444;
  --btn-danger-bg-hover: #DC2626;
  --btn-danger-text: #FFFFFF;
  
  /* Success Button */
  --btn-success-bg: #10B981;
  --btn-success-bg-hover: #059669;
  --btn-success-text: #FFFFFF;
  
  /* Ghost Button */
  --btn-ghost-bg: transparent;
  --btn-ghost-bg-hover: #F3F4F6;
  --btn-ghost-text: #4B5563;
  
  /* --- Action Buttons (View/Edit/Doc from Clients table) --- */
  --btn-view-bg: #10B981;             /* Green */
  --btn-edit-bg: #6366F1;             /* Indigo */
  --btn-doc-bg: #8B5CF6;              /* Violet */
  
  /* --- Form Inputs --- */
  --input-bg: #FFFFFF;
  --input-border: #D1D5DB;
  --input-border-hover: #9CA3AF;
  --input-border-focus: #6366F1;
  --input-text: #1F2937;
  --input-placeholder: #9CA3AF;
  --input-disabled-bg: #F3F4F6;
  --input-disabled-text: #9CA3AF;
  
  /* --- Table Styles --- */
  --table-header-bg: #F9FAFB;
  --table-header-text: #6B7280;
  --table-row-bg: #FFFFFF;
  --table-row-bg-hover: #F9FAFB;
  --table-row-bg-stripe: #FAFAFA;
  --table-border: #E5E7EB;
  
  /* --- Tabs --- */
  --tab-bg: transparent;
  --tab-bg-active: #6366F1;
  --tab-text: #6B7280;
  --tab-text-active: #FFFFFF;
  --tab-border: #E5E7EB;
  
  /* --- Tooltips --- */
  --tooltip-bg: #1F2937;
  --tooltip-text: #FFFFFF;
  
  /* --- Scrollbar --- */
  --scrollbar-track: #F3F4F6;
  --scrollbar-thumb: #D1D5DB;
  --scrollbar-thumb-hover: #9CA3AF;
  
  /* --- Charts/Graphs --- */
  --chart-primary: #6366F1;
  --chart-secondary: #8B5CF6;
  --chart-tertiary: #EC4899;
  --chart-quaternary: #F59E0B;
  --chart-grid: #E5E7EB;
  --chart-axis: #9CA3AF;
  
  /* --- Document Builder Panel --- */
  --panel-bg: #FFFFFF;
  --panel-header-bg: #F9FAFB;
  --panel-border: #E5E7EB;
  
  /* --- Alert/Notification Boxes --- */
  --alert-info-bg: #EFF6FF;
  --alert-info-border: #3B82F6;
  --alert-info-text: #1E40AF;
  
  --alert-warning-bg: #FFFBEB;
  --alert-warning-border: #F59E0B;
  --alert-warning-text: #92400E;
  
  --alert-error-bg: #FEF2F2;
  --alert-error-border: #EF4444;
  --alert-error-text: #991B1B;
  
  --alert-success-bg: #ECFDF5;
  --alert-success-border: #10B981;
  --alert-success-text: #065F46;
  
  /* --- Transition Defaults --- */
  --transition-fast: 150ms ease;
  --transition-normal: 200ms ease;
  --transition-slow: 300ms ease;
  
  /* --- Border Radius --- */
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-full: 9999px;
  
  /* --- Spacing Scale (for reference) --- */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;
}

[data-theme="dark"],
.dark-mode,
:root.dark {
  /* --- Core Brand Colors (Adjusted for dark) --- */
  --brand-primary: #818CF8;           /* Indigo-400 - Brighter for contrast */
  --brand-primary-hover: #A5B4FC;     /* Indigo-300 */
  --brand-primary-active: #6366F1;    /* Indigo-500 */
  --brand-primary-light: #312E81;     /* Indigo-900 */
  --brand-primary-subtle: #1E1B4B;    /* Indigo-950 */
  
  --brand-secondary: #A78BFA;         /* Violet-400 */
  --brand-secondary-hover: #C4B5FD;   /* Violet-300 */
  
  /* --- Background Hierarchy --- */
  --bg-base: #0F0D1A;                 /* Deep purple-black */
  --bg-surface: #1A1625;              /* Card backgrounds */
  --bg-surface-elevated: #231F31;     /* Elevated surfaces */
  --bg-surface-sunken: #0D0B14;       /* Inset areas */
  --bg-overlay: rgba(0, 0, 0, 0.7);
  
  /* --- Sidebar & Navigation --- */
  --sidebar-bg: #0D0B14;              /* Darker than base */
  --sidebar-bg-hover: #1A1625;
  --sidebar-text: #A5B4FC;            /* Indigo-300 */
  --sidebar-text-active: #FFFFFF;
  --sidebar-icon: #818CF8;            /* Indigo-400 */
  --sidebar-icon-active: #FFFFFF;
  --sidebar-divider: #312E81;
  
  /* --- Header Bar --- */
  --header-bg: #0D0B14;
  --header-text: #FFFFFF;
  --header-text-muted: #A5B4FC;
  
  /* --- Toolbar (Programs & Docs) --- */
  --toolbar-bg: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #3730a3 100%);
  
  /* --- Text Colors --- */
  --text-primary: #F3F4F6;            /* Gray-100 */
  --text-secondary: #D1D5DB;          /* Gray-300 */
  --text-tertiary: #9CA3AF;           /* Gray-400 */
  --text-placeholder: #6B7280;        /* Gray-500 */
  --text-disabled: #4B5563;           /* Gray-600 */
  --text-inverse: #1F2937;
  --text-link: #818CF8;
  --text-link-hover: #A5B4FC;
  
  /* --- Border Colors --- */
  --border-default: #312E81;          /* Indigo-900 */
  --border-light: #1E1B4B;            /* Indigo-950 */
  --border-strong: #4338CA;           /* Indigo-700 */
  --border-focus: #818CF8;
  --border-focus-ring: rgba(129, 140, 248, 0.3);
  
  /* --- Card Styles --- */
  --card-bg: #1A1625;
  --card-border: #312E81;
  --card-shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 1px 2px rgba(0, 0, 0, 0.3);
  --card-shadow-hover: 0 4px 6px rgba(0, 0, 0, 0.4), 0 2px 4px rgba(0, 0, 0, 0.3);
  --card-shadow-elevated: 0 10px 15px rgba(0, 0, 0, 0.5), 0 4px 6px rgba(0, 0, 0, 0.3);
  
  /* --- Program Card Headers --- */
  --card-header-dark: #0D0B14;
  --card-header-dark-text: #FFFFFF;
  
  /* --- Status Colors (Dark Mode - More Vibrant) --- */
  --status-red: #F87171;              /* Red-400 */
  --status-red-bg: #450A0A;           /* Red-950 */
  --status-red-border: #7F1D1D;       /* Red-900 */
  --status-red-text: #FCA5A5;         /* Red-300 */
  
  --status-yellow: #FBBF24;           /* Amber-400 */
  --status-yellow-bg: #451A03;        /* Amber-950 */
  --status-yellow-border: #78350F;    /* Amber-900 */
  --status-yellow-text: #FCD34D;      /* Amber-300 */
  
  --status-green: #34D399;            /* Emerald-400 */
  --status-green-bg: #022C22;         /* Emerald-950 */
  --status-green-border: #064E3B;     /* Emerald-900 */
  --status-green-text: #6EE7B7;       /* Emerald-300 */
  
  --status-purple: #A78BFA;           /* Violet-400 */
  --status-purple-bg: #2E1065;        /* Violet-950 */
  --status-purple-border: #4C1D95;    /* Violet-900 */
  --status-purple-text: #C4B5FD;      /* Violet-300 */
  
  --status-blue: #60A5FA;             /* Blue-400 */
  --status-blue-bg: #172554;          /* Blue-950 */
  --status-blue-border: #1E3A8A;      /* Blue-900 */
  --status-blue-text: #93C5FD;        /* Blue-300 */
  
  /* --- Program Type Badge Colors (Dark Mode) --- */
  --badge-rtc: #312E81;
  --badge-rtc-text: #E0E7FF;
  
  --badge-php: #5B21B6;
  --badge-php-text: #EDE9FE;
  
  --badge-iop: #0369A1;
  --badge-iop-text: #E0F2FE;
  
  --badge-virtual: #4338CA;
  --badge-virtual-text: #E0E7FF;
  
  --badge-network: #312E81;
  --badge-network-text: #E0E7FF;
  
  --badge-tbs: #047857;
  --badge-tbs-text: #D1FAE5;
  
  --badge-wilderness: #B45309;
  --badge-wilderness-text: #FEF3C7;
  
  /* --- Button Colors --- */
  --btn-primary-bg: #6366F1;
  --btn-primary-bg-hover: #818CF8;
  --btn-primary-bg-active: #4F46E5;
  --btn-primary-text: #FFFFFF;
  
  --btn-secondary-bg: #1A1625;
  --btn-secondary-bg-hover: #231F31;
  --btn-secondary-border: #312E81;
  --btn-secondary-text: #E0E7FF;
  
  --btn-danger-bg: #DC2626;
  --btn-danger-bg-hover: #EF4444;
  --btn-danger-text: #FFFFFF;
  
  --btn-success-bg: #059669;
  --btn-success-bg-hover: #10B981;
  --btn-success-text: #FFFFFF;
  
  --btn-ghost-bg: transparent;
  --btn-ghost-bg-hover: #231F31;
  --btn-ghost-text: #D1D5DB;
  
  /* --- Action Buttons --- */
  --btn-view-bg: #059669;
  --btn-edit-bg: #4F46E5;
  --btn-doc-bg: #7C3AED;
  
  /* --- Form Inputs --- */
  --input-bg: #1A1625;
  --input-border: #312E81;
  --input-border-hover: #4338CA;
  --input-border-focus: #818CF8;
  --input-text: #F3F4F6;
  --input-placeholder: #6B7280;
  --input-disabled-bg: #0D0B14;
  --input-disabled-text: #4B5563;
  
  /* --- Table Styles --- */
  --table-header-bg: #0D0B14;
  --table-header-text: #9CA3AF;
  --table-row-bg: #1A1625;
  --table-row-bg-hover: #231F31;
  --table-row-bg-stripe: #151121;
  --table-border: #312E81;
  
  /* --- Tabs --- */
  --tab-bg: transparent;
  --tab-bg-active: #6366F1;
  --tab-text: #9CA3AF;
  --tab-text-active: #FFFFFF;
  --tab-border: #312E81;
  
  /* --- Tooltips --- */
  --tooltip-bg: #F3F4F6;
  --tooltip-text: #1F2937;
  
  /* --- Scrollbar --- */
  --scrollbar-track: #0D0B14;
  --scrollbar-thumb: #312E81;
  --scrollbar-thumb-hover: #4338CA;
  
  /* --- Charts/Graphs --- */
  --chart-primary: #818CF8;
  --chart-secondary: #A78BFA;
  --chart-tertiary: #F472B6;
  --chart-quaternary: #FBBF24;
  --chart-grid: #312E81;
  --chart-axis: #6B7280;
  
  /* --- Document Builder Panel --- */
  --panel-bg: #1A1625;
  --panel-header-bg: #0D0B14;
  --panel-border: #312E81;
  
  /* --- Alert/Notification Boxes --- */
  --alert-info-bg: #172554;
  --alert-info-border: #3B82F6;
  --alert-info-text: #93C5FD;
  
  --alert-warning-bg: #451A03;
  --alert-warning-border: #F59E0B;
  --alert-warning-text: #FCD34D;
  
  --alert-error-bg: #450A0A;
  --alert-error-border: #EF4444;
  --alert-error-text: #FCA5A5;
  
  --alert-success-bg: #022C22;
  --alert-success-border: #10B981;
  --alert-success-text: #6EE7B7;
}

/* Scrollbar styling using theme tokens */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background-color: var(--scrollbar-track);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb {
  background-color: var(--scrollbar-thumb);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--scrollbar-thumb-hover);
}

* {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ROOT ELEMENT BACKGROUNDS
   Apply theme tokens to html/body - this is the single source of truth
   Light mode: --bg-base is #F8F7FC
   Dark mode: --bg-base is #0F0D1A
   ═══════════════════════════════════════════════════════════════════════════ */

html, body {
  background-color: var(--bg-base);
  color: var(--text-primary);
  min-height: 100vh;
  margin: 0;
  padding: 0;
}

/* ═══════════════════════════════════════════════════════════════════════════
   STABILITY & ANTI-FLICKER RULES
   Prevents visual glitches, flickering, and improves animation performance
   ═══════════════════════════════════════════════════════════════════════════ */

/* GPU acceleration for animated elements */
.intro-container,
.checklist-panel,
.tour-tooltip,
.tour-overlay,
.onboarding-modal-overlay,
.onboarding-notification,
.onboarding-resume-banner,
.layer-ambient,
.layer-stage,
.layer-soul {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Prevent layout shift during animations */
.intro-scene,
.journey-segment,
.priority-zone,
.dashboard-widget,
.widget-card,
.house-card,
.pipeline-item,
.change-item,
.gap-category {
  contain: layout style;
}

/* Smooth opacity transitions without flicker */
.intro-container,
.intro-scene,
.checklist-panel,
.tour-tooltip,
.onboarding-modal-overlay {
  will-change: opacity, transform;
}

/* Prevent text rendering flicker */
body,
.intro-title,
.intro-subtitle,
.subtitle-text,
.greeting-text,
.widget-header h3 {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Stabilize canvas rendering */
canvas.layer-soul,
canvas.intro-particles,
canvas.intro-confetti {
  image-rendering: optimizeSpeed;
  will-change: contents;
}

/* Prevent backdrop-filter flicker */
.glass,
.glass-strong,
.subtitle-text,
.onboarding-modal {
  -webkit-transform: translate3d(0, 0, 0);
  transform: translate3d(0, 0, 0);
}

/* Stabilize visibility transitions */
#loginScreen,
#mainApp {
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

/* Prevent FOUC (Flash of Unstyled Content) */
#loginScreen[style*="display: none"],
#mainApp[style*="display: none"] {
  visibility: hidden !important;
  pointer-events: none !important;
}

/* Smooth widget transitions */
.dashboard-widget,
.widget-skeleton,
.widget-empty,
.widget-error {
  transition: opacity 0.2s ease;
}

/* Prevent zone expansion flicker */
.zone-content {
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.2s ease;
}

.zone-content.collapsed {
  max-height: 0;
  opacity: 0;
}

.zone-content.expanded {
  max-height: 2000px;
  opacity: 1;
}

/* Stabilize hover states */
.priority-item,
.journey-segment,
.house-card,
.quick-actions__btn,
.kpi-badge {
  transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
}

/* Prevent modal/overlay flicker */
.onboarding-modal-overlay {
  animation: fadeIn 0.3s ease forwards;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  .intro-container,
  .checklist-panel,
  .tour-tooltip {
    will-change: auto;
  }
}







