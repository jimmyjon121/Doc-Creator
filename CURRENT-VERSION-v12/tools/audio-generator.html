<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareConnect Pro - Audio Studio v4</title>
    <style>
        :root {
            --bg-primary: #FDF6E3;
            --bg-secondary: #FEFCE8;
            --bg-card: #FFFFFF;
            --accent: #0D9488;
            --accent-light: #14B8A6;
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --border: rgba(0, 0, 0, 0.08);
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --coral: #F97316;
            --lavender: #A78BFA;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 48px;
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 12px;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .version-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .api-section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 32px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .api-section h2 {
            font-size: 1.2rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-primary);
        }
        
        .api-row {
            display: flex;
            gap: 16px;
            align-items: flex-end;
        }
        
        .form-group {
            flex: 1;
        }
        
        label {
            display: block;
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }
        
        input[type="text"],
        input[type="password"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }
        
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--accent);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(13, 148, 136, 0.3);
        }
        
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: var(--bg-secondary);
        }
        
        .scripts-grid {
            display: grid;
            gap: 16px;
        }
        
        .script-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: all 0.2s;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        .script-card:hover {
            border-color: var(--accent);
            box-shadow: 0 4px 16px rgba(13, 148, 136, 0.1);
        }
        
        .script-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .script-title {
            font-weight: 600;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .scene-number {
            background: var(--accent);
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
        
        .script-text {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 16px;
            line-height: 1.7;
            font-style: italic;
            padding: 12px;
            background: var(--bg-primary);
            border-radius: 8px;
            border-left: 3px solid var(--accent);
        }
        
        .script-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: rgba(245, 158, 11, 0.15);
            color: var(--warning);
        }
        
        .status-generating {
            background: rgba(13, 148, 136, 0.15);
            color: var(--accent);
        }
        
        .status-done {
            background: rgba(16, 185, 129, 0.15);
            color: var(--success);
        }
        
        .status-error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--error);
        }
        
        .audio-player {
            width: 100%;
            height: 40px;
            margin-top: 12px;
        }
        
        .bulk-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 16px 20px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        .progress-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .progress-bar {
            width: 200px;
            height: 8px;
            background: var(--bg-primary);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-light));
            width: 0%;
            transition: width 0.3s;
        }
        
        .output-section {
            margin-top: 32px;
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }
        
        .output-section h2 {
            margin-bottom: 16px;
        }
        
        pre {
            background: var(--bg-primary);
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Consolas', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            color: var(--text-primary);
        }
        
        .voice-select-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }
        
        .voice-option {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
            background: var(--bg-primary);
        }
        
        .voice-option:hover {
            border-color: var(--accent);
        }
        
        .voice-option.selected {
            border-color: var(--accent);
            background: rgba(13, 148, 136, 0.08);
        }
        
        .voice-option.recommended {
            position: relative;
        }
        
        .voice-option.recommended::after {
            content: 'Recommended';
            position: absolute;
            top: -8px;
            right: 8px;
            background: var(--coral);
            color: white;
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .voice-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .voice-desc {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .help-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
        
        .divider {
            height: 1px;
            background: var(--border);
            margin: 24px 0;
        }
        
        .scene-type {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 4px;
            margin-left: 8px;
            font-weight: 500;
        }
        
        .scene-type.emotional {
            background: rgba(167, 139, 250, 0.2);
            color: var(--lavender);
        }
        
        .scene-type.feature {
            background: rgba(13, 148, 136, 0.2);
            color: var(--accent);
        }
        
        .scene-type.cta {
            background: rgba(249, 115, 22, 0.2);
            color: var(--coral);
        }
        
        .duration-estimate {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>CareConnect Audio Studio <span class="version-badge">v6 - Proper Pacing</span></h1>
            <p class="subtitle">Generate emotionally authentic voiceovers with natural pauses and cadence</p>
        </header>
        
        <!-- API Configuration -->
        <section class="api-section">
            <h2>API Configuration</h2>
            <div class="api-row">
                <div class="form-group">
                    <label for="apiKey">ElevenLabs API Key</label>
                    <input type="password" id="apiKey" placeholder="Enter your ElevenLabs API key">
                    <p class="help-text">Get your API key from <a href="https://elevenlabs.io" target="_blank" style="color: var(--accent);">elevenlabs.io</a></p>
                </div>
                <button class="btn btn-secondary" onclick="testConnection()">Test Connection</button>
            </div>
            
            <div class="divider"></div>
            
            <h2>Voice Selection</h2>
            <p class="help-text" style="margin-bottom: 12px;">Select a warm, supportive voice. The narration should feel like a trusted colleague, not a tutorial.</p>
            <div class="voice-select-grid" id="voiceGrid">
                <!-- Populated by JS -->
            </div>
        </section>
        
        <!-- Bulk Actions -->
        <div class="bulk-actions">
            <div class="progress-info">
                <span id="progressText">0 of 7 generated</span>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
            <div style="display: flex; gap: 12px;">
                <button class="btn btn-secondary" onclick="downloadTiming()">Download timing.json</button>
                <button class="btn btn-primary" id="generateAllBtn" onclick="generateAll()">
                    Generate All Audio
                </button>
            </div>
        </div>
        
        <!-- Script Cards -->
        <div class="scripts-grid" id="scriptsGrid">
            <!-- Populated by JS -->
        </div>
        
        <!-- Output Section -->
        <section class="output-section">
            <h2>Generated Timing Data</h2>
            <pre id="timingOutput">{
  "scenes": {
    // Timing data will appear here after generation
  }
}</pre>
        </section>
    </div>
    
    <script>
        // V6 Script - WITH PROPER PAUSES AND CADENCE
        // Uses ellipses for short pauses, line breaks for medium pauses
        // ElevenLabs interprets punctuation as timing cues
        const SCRIPTS = [
            {
                id: 'chaos',
                scene: 1,
                filename: 'vo-scene-1-chaos.mp3',
                title: 'Scene 1: Chaos to Order',
                type: 'emotional',
                estimatedDuration: 18,
                text: `Emails... Calls... Scattered notes...

Where do you even start?

Every day begins with chaos.

But what if... there was a sanctuary?

A place where clarity... replaces confusion.

This... is CareConnect Pro.`
            },
            {
                id: 'dashboard',
                scene: 2,
                filename: 'vo-scene-2-dashboard.mp3',
                title: 'Scene 2: The Dashboard',
                type: 'feature',
                estimatedDuration: 50,
                text: `Welcome to your command center.

Every morning starts here.

At a glance, you see your entire caseload. The Client Journey widget tracks each stage... from admission, through treatment, to discharge.

Four clients in week one. Three approaching their first milestone. Six in active treatment.

Your Daily Flight Plan turns the noise into a clear list.

Red zone... what's overdue. Handle these first.

Yellow... today's priorities.

Purple... discharge prep.

Green... on track.

The Pipeline shows your caseload flow. New intakes. Active clients. Pending discharges.

The Compliance widget tracks your metrics.

And the Gaps widget? It highlights what's missing... before it becomes an audit finding.

Missing aftercare plan... day forty-five.

Now you know.`
            },
            {
                id: 'programs',
                scene: 3,
                filename: 'vo-scene-3-programs.mp3',
                title: 'Scene 3: Program Database',
                type: 'feature',
                estimatedDuration: 60,
                text: `Your clinical library.

Five hundred twenty-nine treatment programs... searchable... and organized.

Watch what happens when you type... "trauma adolescent."

The system understands what you need.

Eighty-seven programs match.

Semantic filters appear automatically... trauma-focused... ages thirteen to seventeen.

Each program card shows what matters.

Resilience Recovery... a P-H-P program in Malibu.

Trauma-specialized. D-B-T certified. Family therapy included.

Insurance? Aetna... Blue Cross... Cigna.

Click "Add to Plan"... and it's done.

The program joins your client's aftercare document.

The filter rail lets you narrow by level of care... R-T-C... P-H-P... I-O-P... Wilderness.

By age range. By location. By specialty.

Every filter updates the results... instantly.`
            },
            {
                id: 'map',
                scene: 4,
                filename: 'vo-scene-4-map.mp3',
                title: 'Scene 4: The Map',
                type: 'feature',
                estimatedDuration: 50,
                text: `But where are they located?

When geography matters... see programs on a map.

Five hundred twenty-nine pins... across the nation.

Each color represents a level of care. Purple for R-T-C. Teal for P-H-P. Cyan for I-O-P.

Watch as we zoom into California.

Eighty-seven programs in this state alone.

The Los Angeles cluster expands... Malibu... Santa Monica... Newport Beach.

Type "Malibu" in the search.

Watch the irrelevant pins... fade away.

Twelve programs nearby.

Hover over a pin to preview.

Click... to see full details.

One click... "Add to Plan."

The program flies into your aftercare document.`
            },
            {
                id: 'document',
                scene: 5,
                filename: 'vo-scene-5-document.mp3',
                title: 'Scene 5: Document Builder',
                type: 'feature',
                estimatedDuration: 45,
                text: `Now... let's build the document.

Your selected programs are ready in the sidebar.

Resilience Recovery... Newport Academy.

The system generates a professional aftercare recommendation... automatically.

Client summary at the top. Emma Thompson... seventeen... completing residential treatment.

Program recommendations follow... with full details... and clinical rationale.

Next steps are outlined.

Choose what to include. Program details... contact info... insurance verification.

One click... "Save to Vault."

The document is secured.

Ready to share with families.

Professional... Complete... Done.`
            },
            {
                id: 'tracking',
                scene: 6,
                filename: 'vo-scene-6-tracking.mp3',
                title: 'Scene 6: The Safety Net',
                type: 'feature',
                estimatedDuration: 40,
                text: `Did I submit Emma's utilization review?

When is Liam's assessment due?

Is Mason's signature still pending?

The anxious thoughts... that keep coaches up at night.

CareConnect is watching.

Your orbital command center shows every task... color-coded by urgency.

Red means critical... Emma's review... due in two hours.

Yellow marks warnings.

The smart insight card surfaces what matters most.

Your compliance dashboard shows the big picture.

Ninety-four percent overall score.

Eight tasks today. All deadlines visible.

Sleep well tonight.

We've got this.`
            },
            {
                id: 'ready',
                scene: 7,
                filename: 'vo-scene-7-ready.mp3',
                title: 'Scene 7: Transcendence',
                type: 'cta',
                estimatedDuration: 28,
                text: `Find the right programs.

Build professional documents.

Track every deadline.

Thrive... in your role.

Your sanctuary of clarity... is ready.

Run your day.

Don't let it run you.

Welcome... to CareConnect Pro.`
            }
        ];
        
        // Voice options - warm, natural voices recommended
        const VOICES = [
            { id: '21m00Tcm4TlvDq8ikWAM', name: 'Rachel', desc: 'Warm, calm, professional female', recommended: true },
            { id: 'EXAVITQu4vr4xnSDxMaL', name: 'Sarah', desc: 'Warm, friendly female' },
            { id: 'ThT5KcBeYPX3keUQqHPh', name: 'Charlotte', desc: 'Natural, conversational female' },
            { id: 'pNInz6obpgDQGcFmaJgB', name: 'Adam', desc: 'Deep, calm male', recommended: false },
            { id: 'ErXwobaYiN019PkySvjV', name: 'Antoni', desc: 'Warm, approachable male' },
            { id: 'yoZ06aMxZJJ28mfd3POQ', name: 'Sam', desc: 'Authentic, natural male' }
        ];
        
        let selectedVoice = VOICES[0].id;
        let generatedAudio = {};
        let timingData = { 
            version: 'v6-proper-pacing',
            totalDuration: 0,
            scenes: {} 
        };
        
        // Initialize the page
        function init() {
            renderVoiceGrid();
            renderScriptCards();
            loadSavedApiKey();
        }
        
        function renderVoiceGrid() {
            const grid = document.getElementById('voiceGrid');
            grid.innerHTML = VOICES.map(voice => `
                <div class="voice-option ${voice.id === selectedVoice ? 'selected' : ''} ${voice.recommended ? 'recommended' : ''}" 
                     onclick="selectVoice('${voice.id}')">
                    <div class="voice-name">${voice.name}</div>
                    <div class="voice-desc">${voice.desc}</div>
                </div>
            `).join('');
        }
        
        function selectVoice(voiceId) {
            selectedVoice = voiceId;
            renderVoiceGrid();
        }
        
        function renderScriptCards() {
            const grid = document.getElementById('scriptsGrid');
            grid.innerHTML = SCRIPTS.map(script => `
                <div class="script-card" id="card-${script.id}">
                    <div class="script-header">
                        <div class="script-title">
                            <span class="scene-number">${script.scene}</span>
                            ${script.title}
                            <span class="scene-type ${script.type}">${script.type}</span>
                        </div>
                        <span class="status-badge status-pending" id="status-${script.id}">Pending</span>
                    </div>
                    <div class="script-text">"${script.text}"</div>
                    <div class="duration-estimate">Estimated: ~${script.estimatedDuration}s</div>
                    <div class="script-actions">
                        <button class="btn btn-secondary" onclick="generateSingle('${script.id}')">
                            Generate
                        </button>
                        <button class="btn btn-secondary" onclick="previewText('${script.id}')" title="Preview with browser TTS">
                            Preview
                        </button>
                    </div>
                    <audio class="audio-player" id="audio-${script.id}" controls style="display: none;"></audio>
                </div>
            `).join('');
        }
        
        function loadSavedApiKey() {
            const saved = localStorage.getItem('elevenlabs_api_key');
            if (saved) {
                document.getElementById('apiKey').value = saved;
            }
        }
        
        function getApiKey() {
            const key = document.getElementById('apiKey').value.trim();
            if (key) {
                localStorage.setItem('elevenlabs_api_key', key);
            }
            return key;
        }
        
        async function testConnection() {
            const apiKey = getApiKey();
            if (!apiKey) {
                alert('Please enter your API key');
                return;
            }
            
            try {
                const response = await fetch('https://api.elevenlabs.io/v1/user', {
                    headers: { 'xi-api-key': apiKey }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    alert(`Connected! Subscription: ${data.subscription?.tier || 'Unknown'}`);
                } else {
                    alert('Invalid API key');
                }
            } catch (error) {
                alert('Connection failed: ' + error.message);
            }
        }
        
        async function generateSingle(scriptId) {
            const apiKey = getApiKey();
            if (!apiKey) {
                alert('Please enter your API key');
                return;
            }
            
            const script = SCRIPTS.find(s => s.id === scriptId);
            if (!script) return;
            
            updateStatus(scriptId, 'generating', 'Generating...');
            
            try {
                const response = await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${selectedVoice}`, {
                    method: 'POST',
                    headers: {
                        'xi-api-key': apiKey,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        text: script.text,
                        model_id: 'eleven_multilingual_v2', // Better for pauses and expression
                        voice_settings: {
                            stability: 0.35,        // More natural variation
                            similarity_boost: 0.70, // Consistent but expressive
                            style: 0.45,            // More expressiveness for emotion
                            use_speaker_boost: true
                        }
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`API error: ${response.status}`);
                }
                
                const audioBlob = await response.blob();
                const audioUrl = URL.createObjectURL(audioBlob);
                
                // Store for download
                generatedAudio[scriptId] = audioBlob;
                
                // Get duration
                const duration = await getAudioDuration(audioUrl);
                timingData.scenes[scriptId] = {
                    scene: script.scene,
                    title: script.title,
                    duration: duration,
                    file: script.filename,
                    type: script.type
                };
                
                // Update total duration
                timingData.totalDuration = Object.values(timingData.scenes)
                    .reduce((sum, s) => sum + s.duration, 0);
                
                // Update UI
                const audioEl = document.getElementById(`audio-${scriptId}`);
                audioEl.src = audioUrl;
                audioEl.style.display = 'block';
                
                updateStatus(scriptId, 'done', `Done (${duration.toFixed(1)}s)`);
                updateProgress();
                updateTimingOutput();
                
                // Auto-download
                downloadAudio(scriptId, script.filename);
                
            } catch (error) {
                console.error('Generation error:', error);
                updateStatus(scriptId, 'error', 'Error');
                alert(`Failed to generate: ${error.message}`);
            }
        }
        
        async function generateAll() {
            const apiKey = getApiKey();
            if (!apiKey) {
                alert('Please enter your API key');
                return;
            }
            
            const btn = document.getElementById('generateAllBtn');
            btn.disabled = true;
            btn.innerHTML = '<div class="loading-spinner"></div> Generating...';
            
            for (const script of SCRIPTS) {
                if (!generatedAudio[script.id]) {
                    await generateSingle(script.id);
                    // Small delay between requests to avoid rate limiting
                    await new Promise(r => setTimeout(r, 1500));
                }
            }
            
            btn.disabled = false;
            btn.innerHTML = 'Generate All Audio';
            
            alert(`All audio generated! Total duration: ${timingData.totalDuration.toFixed(1)}s`);
        }
        
        function getAudioDuration(url) {
            return new Promise((resolve) => {
                const audio = new Audio(url);
                audio.addEventListener('loadedmetadata', () => {
                    resolve(audio.duration);
                });
                audio.addEventListener('error', () => {
                    resolve(10); // Default fallback
                });
            });
        }
        
        function downloadAudio(scriptId, filename) {
            const blob = generatedAudio[scriptId];
            if (!blob) return;
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function downloadTiming() {
            const json = JSON.stringify(timingData, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'timing.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function previewText(scriptId) {
            const script = SCRIPTS.find(s => s.id === scriptId);
            if (!script) return;
            
            // Use browser TTS for preview
            speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(script.text);
            utterance.rate = 0.85; // Slightly slower for warmth
            utterance.pitch = 1.0;
            speechSynthesis.speak(utterance);
        }
        
        function updateStatus(scriptId, status, text) {
            const badge = document.getElementById(`status-${scriptId}`);
            badge.className = `status-badge status-${status}`;
            badge.textContent = text;
        }
        
        function updateProgress() {
            const done = Object.keys(generatedAudio).length;
            const total = SCRIPTS.length;
            const percent = (done / total) * 100;
            
            document.getElementById('progressText').textContent = `${done} of ${total} generated`;
            document.getElementById('progressFill').style.width = `${percent}%`;
        }
        
        function updateTimingOutput() {
            document.getElementById('timingOutput').textContent = JSON.stringify(timingData, null, 2);
        }
        
        // Initialize on load
        init();
    </script>
</body>
</html>
